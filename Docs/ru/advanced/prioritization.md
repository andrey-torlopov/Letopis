## Уровни приоритета

`LogPriority` определяет два уровня:

### `.default`

Обычные события, которые могут быть буферизованы или отправлены пакетами.

```swift
logger.priority(.default).info("Пользователь прокрутил до конца")
```

### `.critical`

События, требующие немедленной обработки (сбои, критическая аналитика).

```swift
logger.priority(.critical).error("Сбой обработки платежа")
```

## Интерпретация перехватчиками

Каждый перехватчик может интерпретировать приоритеты по-разному:

### Пример сетевого перехватчика

```swift
final class NetworkInterceptor: LetopisInterceptor {
    func handle(_ logEvent: LogEvent) {
        if logEvent.priority == .critical {
            // Отправить немедленно
            sendImmediately(logEvent)
        } else {
            // Поставить в очередь для пакетной отправки
            addToQueue(logEvent)
        }
    }
}
```

### Пример дискового перехватчика

```swift
final class DiskInterceptor: LetopisInterceptor {
    func handle(_ logEvent: LogEvent) {
        // Сохранить всё
        saveToDisk(logEvent)
        
        // Запустить синхронизацию только для критических событий
        if logEvent.priority == .critical {
            triggerBackgroundSync()
        }
    }
}
```

### Пример консольного перехватчика

```swift
let consoleInterceptor = ConsoleInterceptor(
    priorities: [.critical] // Печатать только критические сообщения
)
```

## Лучшие практики

1. **Используйте `.default` для большинства логов**: Резервируйте `.critical` для действительно важных событий
2. **Определите четкие критерии**: Задокументируйте, когда использовать каждый уровень приоритета
3. **Тестируйте обработку приоритетов**: Проверьте, что перехватчики корректно работают для каждого уровня
4. **Учитывайте влияние на пользователя**: Критические события должны оправдывать затраты на производительность

## Распространенные случаи использования

### Критический приоритет

- Сбои платежей
- Нарушения безопасности
- Повреждение данных
- Отключения сервисов
- Фатальные ошибки

### Обычный приоритет

- Взаимодействия пользователя
- Вызовы API
- Отладочная информация
- Метрики производительности
- Использование функций

---

[Назад к индексу документации](../index.md)
