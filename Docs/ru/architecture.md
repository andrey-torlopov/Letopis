# Обзор архитектуры

## Ключевые сущности

### `Letopis`
Фасад, который создает события и распределяет их между интерцепторами. Принимает начальный массив `LetopisInterceptor` и может расширяться во время выполнения через `addInterceptor(_:)`.

### `Log`
Билдер, который позволяет описать событие через цепочку вызовов перед его отправкой.

### `LogEvent`
DTO, содержащее:
- Идентификатор
- Временную метку
- Тип лога (`LogEventType`)
- Приоритет (`LogPriority`)
- Сообщение
- Дополнительный словарь `payload`

### `EventTypeProtocol` / `EventActionProtocol`
Протоколы для семантических классификаторов событий. Вы можете создать собственные типы, соответствующие этим протоколам.

### `LetopisInterceptor`
Протокол для обработчиков, которые решают, что делать с событиями (отправлять по сети, сохранять, фильтровать и т.д.).

## Как это работает

1. **Создание события**: Используйте билдер `Log` для создания события со всеми необходимыми метаданными
2. **Отправка события**: Событие отправляется всем зарегистрированным интерцепторам
3. **Обработка интерцептором**: Каждый интерцептор решает, как обработать событие, основываясь на своей логике
4. **Доставка**: События доставляются в настроенные пункты назначения (консоль, сеть, хранилище и т.д.)

---

[Вернуться к оглавлению](index.md)
